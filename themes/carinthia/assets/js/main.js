console.log('This site was generated by Hugo.');

(function() {
  const THEME_KEY = 'theme-preference';
  const themes = ['system', 'light', 'dark'];
  
  function getThemePreference() {
    const stored = localStorage.getItem(THEME_KEY);
    if (stored && themes.includes(stored)) {
      return stored;
    }
    return 'system';
  }
  
  function setThemePreference(theme) {
    localStorage.setItem(THEME_KEY, theme);
  }
  
  function applyTheme(theme) {
    document.documentElement.setAttribute('data-theme', theme);
    
    // Update system icon based on system preference
    if (theme === 'system') {
      const systemIcon = document.querySelector('.theme-icon-system');
      if (systemIcon) {
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const sunElement = systemIcon.querySelector('.system-sun');
        const moonElement = systemIcon.querySelector('.system-moon');
        
        if (sunElement && moonElement) {
          if (prefersDark) {
            sunElement.style.display = 'none';
            moonElement.style.display = 'block';
          } else {
            sunElement.style.display = 'block';
            moonElement.style.display = 'none';
          }
        }
      }
    }
  }
  
  function cycleTheme() {
    const current = getThemePreference();
    const currentIndex = themes.indexOf(current);
    const nextIndex = (currentIndex + 1) % themes.length;
    const nextTheme = themes[nextIndex];
    
    setThemePreference(nextTheme);
    applyTheme(nextTheme);
  }
  
  // Apply theme on load
  document.addEventListener('DOMContentLoaded', function() {
    const theme = getThemePreference();
    applyTheme(theme);
    
    // Add click listener to theme switcher
    const switcher = document.getElementById('theme-switcher');
    if (switcher) {
      switcher.addEventListener('click', cycleTheme);
    }
    
    // Listen for system theme changes
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    mediaQuery.addEventListener('change', function() {
      const currentTheme = getThemePreference();
      if (currentTheme === 'system') {
        // Re-apply to update system icon
        applyTheme('system');
      }
    });
  });
  
  // Also apply immediately in case DOM is already loaded
  if (document.readyState !== 'loading') {
    const theme = getThemePreference();
    applyTheme(theme);
  }
})();
